{"ast":null,"code":"import { CIVIC_INFO_API_KEY, OPEN_SECRETS_API_KEY } from './apiKeys';\nconst getCivicInfoRepByAddress = async zipCode => {\n  const apiUrl = 'https://www.googleapis.com/civicinfo/v2/representatives';\n  const params = {\n    address: zipCode,\n    includeOffices: true,\n    levels: 'country',\n    roles: 'legislatorLowerBody',\n    key: CIVIC_INFO_API_KEY\n  };\n  const queryString = new URLSearchParams(params).toString();\n  const urlWithParams = `${apiUrl}?${queryString}`;\n  try {\n    const response = await fetch(urlWithParams);\n    if (!response.ok) {\n      throw new Error(`HTTP error. Status: ${response.status}`);\n    }\n    const data = await response.json();\n    const civicInfoRep = {\n      representative: data.officials[0],\n      state: data.normalizedInput.state\n    };\n    return civicInfoRep;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return {\n      representative: {},\n      state: ''\n    };\n  }\n};\nconst getOpenSecretsCandidateIds = async (officialsState, representativeName) => {\n  const apiUrl = 'http://www.opensecrets.org/api/';\n  const params = {\n    method: 'getLegislators',\n    id: officialsState,\n    apiKey: OPEN_SECRETS_API_KEY,\n    output: 'json'\n  };\n  const urlWithParams = `${apiUrl}?method=${params.method}&id=${params.id}&apikey=${params.apiKey}&output=${params.output}`;\n  try {\n    const response = await fetch(urlWithParams);\n    if (!response.ok) {\n      throw new Error(`HTTP error. Status: ${response.status}`);\n    }\n    const data = await response.json();\n    function getLegislatorIdFromName(data, name) {\n      for (let legislator of data) {\n        if (legislator['@attributes'].firstlast === name) {\n          return {\n            firstlast: legislator['@attributes'].firstlast,\n            cid: legislator['@attributes'].cid\n          };\n        }\n      }\n      return null;\n    }\n    const representativeId = getLegislatorIdFromName(data.response.legislator, representativeName);\n    return {\n      representative: representativeId\n    };\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return {\n      representativeId: ''\n    };\n  }\n};\nconst getOpenSecretCandidatesInfo = async officialId => {\n  const apiUrl = 'http://www.opensecrets.org/api/';\n  const params = {\n    method: 'candContrib',\n    apiKey: OPEN_SECRETS_API_KEY,\n    cid: officialId,\n    cycle: '2000',\n    // out of range cycle returns most recent cycle\n    output: 'json'\n  };\n  const urlWithParams = `${apiUrl}?method=${params.method}&apikey=${params.apiKey}&cid=${params.cid}&cycle=${params.cycle}&output=${params.output}`;\n  try {\n    const response = await fetch(urlWithParams);\n    if (!response.ok) {\n      throw new Error(`HTTP error. Status: ${response.status}`);\n    }\n    const data = await response.json();\n    console.log(data);\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return {\n      representativeContribInfo: ''\n    };\n  }\n};\nexport { getCivicInfoRepByAddress, getOpenSecretsCandidateIds, getOpenSecretCandidatesInfo };","map":{"version":3,"names":["CIVIC_INFO_API_KEY","OPEN_SECRETS_API_KEY","getCivicInfoRepByAddress","zipCode","apiUrl","params","address","includeOffices","levels","roles","key","queryString","URLSearchParams","toString","urlWithParams","response","fetch","ok","Error","status","data","json","civicInfoRep","representative","officials","state","normalizedInput","error","console","getOpenSecretsCandidateIds","officialsState","representativeName","method","id","apiKey","output","getLegislatorIdFromName","name","legislator","firstlast","cid","representativeId","getOpenSecretCandidatesInfo","officialId","cycle","log","representativeContribInfo"],"sources":["/Users/dbrainy/dev/politick/src/api.js"],"sourcesContent":["import { CIVIC_INFO_API_KEY, OPEN_SECRETS_API_KEY } from './apiKeys';\n\nconst getCivicInfoRepByAddress = async (zipCode) => {\n\n    const apiUrl = 'https://www.googleapis.com/civicinfo/v2/representatives';\n    const params = {\n        address: zipCode,\n        includeOffices: true,\n        levels: 'country',\n        roles: 'legislatorLowerBody',\n        key: CIVIC_INFO_API_KEY,\n    };\n\n    const queryString = new URLSearchParams(params).toString();\n    const urlWithParams = `${apiUrl}?${queryString}`;\n\n    try {\n        const response = await fetch(urlWithParams);\n        if (!response.ok) {\n            throw new Error(`HTTP error. Status: ${response.status}`);\n        }\n        const data = await response.json();\n\n        const civicInfoRep = {\n            representative: data.officials[0],\n            state: data.normalizedInput.state,\n        }\n        return civicInfoRep;\n\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        return {\n            representative: {},\n            state: '',\n        }\n    }\n};\n\nconst getOpenSecretsCandidateIds = async (officialsState, representativeName) => {\n\n    const apiUrl = 'http://www.opensecrets.org/api/'\n    const params = {\n        method: 'getLegislators',\n        id: officialsState,\n        apiKey: OPEN_SECRETS_API_KEY,\n        output: 'json',\n    }\n\n    const urlWithParams = `${apiUrl}?method=${params.method}&id=${params.id}&apikey=${params.apiKey}&output=${params.output}`;\n\n    try {\n        const response = await fetch(urlWithParams);\n        if (!response.ok) {\n            throw new Error(`HTTP error. Status: ${response.status}`);\n        }\n        const data = await response.json();\n\n        function getLegislatorIdFromName(data, name) {\n            for (let legislator of data) {\n                if (legislator['@attributes'].firstlast === name) {\n                    return {\n                        firstlast: legislator['@attributes'].firstlast,\n                        cid: legislator['@attributes'].cid,\n                    };\n                }\n            }\n            return null;\n        }\n\n        const representativeId = getLegislatorIdFromName(data.response.legislator, representativeName);\n\n        return {\n            representative: representativeId,\n        };\n\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        return {\n            representativeId: '',\n        }\n    }\n\n};\n\nconst getOpenSecretCandidatesInfo = async (officialId) => {\n\n    const apiUrl = 'http://www.opensecrets.org/api/'\n    const params = {\n        method: 'candContrib',\n        apiKey: OPEN_SECRETS_API_KEY,\n        cid: officialId,\n        cycle: '2000', // out of range cycle returns most recent cycle\n        output: 'json',\n    }\n\n    const urlWithParams = `${apiUrl}?method=${params.method}&apikey=${params.apiKey}&cid=${params.cid}&cycle=${params.cycle}&output=${params.output}`;\n\n    try {\n        const response = await fetch(urlWithParams);\n        if (!response.ok) {\n            throw new Error(`HTTP error. Status: ${response.status}`);\n        }\n        const data = await response.json();\n\n        console.log(data)\n\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        return {\n            representativeContribInfo: '',\n        }\n    }\n}\n\nexport { getCivicInfoRepByAddress, getOpenSecretsCandidateIds, getOpenSecretCandidatesInfo };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}